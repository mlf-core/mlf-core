

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Github Support &mdash; mlf-core 1.10.0 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="_static/custom_cookietemple.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Creating Releases" href="creating_releases.html" />
    <link rel="prev" title="Available templates" href="available_templates/available_templates.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> mlf-core
          

          
          </a>

          
            
            
              <div class="version">
                1.10.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="readme.html">mlf-core</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage.html">General Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="create.html">Create a project</a></li>
<li class="toctree-l1"><a class="reference internal" href="list_info.html">Getting information about available templates</a></li>
<li class="toctree-l1"><a class="reference internal" href="lint.html">Linting your project</a></li>
<li class="toctree-l1"><a class="reference internal" href="fix_artifact_paths.html">Fixing the paths of locally saved MLflow runs</a></li>
<li class="toctree-l1"><a class="reference internal" href="bump_version.html">Bumping the version of an existing project</a></li>
<li class="toctree-l1"><a class="reference internal" href="sync.html">Syncing your project</a></li>
<li class="toctree-l1"><a class="reference internal" href="config.html">Configure mlf-core</a></li>
<li class="toctree-l1"><a class="reference internal" href="upgrade.html">Upgrade mlf-core</a></li>
<li class="toctree-l1"><a class="reference internal" href="available_templates/available_templates.html">Available templates</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Github Support</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="#branches">Branches</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id2">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="#branch-protection-rules">Branch protection rules</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#github-actions">Github Actions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id3">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pr-to-master-from-patch-release-only-workflow">pr_to_master_from_patch_release_only workflow</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sync-yml">sync.yml</a></li>
<li class="toctree-l3"><a class="reference internal" href="#publish-docker-yml">publish_docker.yml</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#secrets">Secrets</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#error-handling-during-github-repository-creation">Error handling during Github repository creation</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="creating_releases.html">Creating Releases</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="adding_new_templates.html">Adding new templates</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="authors.html">Credits</a></li>
<li class="toctree-l1"><a class="reference internal" href="code_of_conduct.html">Contributor Covenant Code of Conduct</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">mlf-core</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Github Support</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/github_support.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="github-support">
<span id="id1"></span><h1>Github Support<a class="headerlink" href="#github-support" title="Permalink to this headline">¶</a></h1>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>mlf-core uses <a class="reference external" href="https://gitpython.readthedocs.io/en/stable/">GitPython</a> and <a class="reference external" href="https://pygithub.readthedocs.io/en/latest/introduction.html">PyGithub</a> to automatically create a repository, add, commit and push all files.
Moreover, issue labels, a <code class="docutils literal notranslate"><span class="pre">development</span></code> and a <code class="docutils literal notranslate"><span class="pre">TEMPLATE</span></code> branch are created. The <code class="docutils literal notranslate"><span class="pre">TEMPLATE</span></code> branch is required for <a class="reference internal" href="sync.html#sync"><span class="std std-ref">Syncing your project</span></a> to work and should not be touched manually.</p>
</div>
<div class="section" id="branches">
<h2>Branches<a class="headerlink" href="#branches" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id2">
<h3>Overview<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p>git branches can be understood as diverging copies of the main line of development and facilitate parallel development.
To learn more about branches read <a class="reference external" href="https://git-scm.com/book/en/v2/Git-Branching-Branches-in-a-Nutshell">Branches in a Nutshell</a> of the <a class="reference external" href="https://git-scm.com/book">Pro Git Book</a>.
A simple best practice development workflow follows the pattern that the <code class="docutils literal notranslate"><span class="pre">master</span></code> branch always contains the latest released code.
It should only be touched for new releases. Code on the <code class="docutils literal notranslate"><span class="pre">master</span></code> branch must compile and be as bug free as possible.
Development takes place on the <code class="docutils literal notranslate"><span class="pre">development</span></code> branch. All parallelly developed features eventually make it into this branch.
The <code class="docutils literal notranslate"><span class="pre">development</span></code> branch should always compile, but it may contain incomplete features or known bugs.
mlf-core creates a <code class="docutils literal notranslate"><span class="pre">TEMPLATE</span></code> branch, which is required for <a class="reference internal" href="sync.html#sync"><span class="std std-ref">Syncing your project</span></a> to work and should not be touched manually.</p>
</div>
<div class="section" id="branch-protection-rules">
<h3>Branch protection rules<a class="headerlink" href="#branch-protection-rules" title="Permalink to this headline">¶</a></h3>
<p>mlf-core sets several branch protection rules, which enforce a minimum standard of best branch practices.
For more information please read <a class="reference external" href="https://help.github.com/en/github/administering-a-repository/about-protected-branches">about protected branches</a>.
The following branch protection rules only apply to the <code class="docutils literal notranslate"><span class="pre">master</span></code> branch:</p>
<ol class="arabic simple">
<li><p>Required review for pull requests: A pull request to <code class="docutils literal notranslate"><span class="pre">master</span></code> can only be merged if the code was at least reviewed by one person. If you are developing alone you can merge with your administrator powers.</p></li>
<li><p>Dismiss stale pull request approvals when new commits are pushed.</p></li>
</ol>
</div>
</div>
<div class="section" id="github-actions">
<h2>Github Actions<a class="headerlink" href="#github-actions" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id3">
<h3>Overview<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<p>Modern development tries to merge new features and bug fixes as soon as possible into the <code class="docutils literal notranslate"><span class="pre">development</span></code> branch, since big, diverging branches are more likely to lead to merge conflicts.
This practice is known as <a class="reference external" href="https://en.wikipedia.org/wiki/Continuous_integration">continuous integration</a> (CI).
Continuous integration is usually complemented with automated tests and continuous delivery (CD).
All of mlf-core’s templates feature <a class="reference external" href="https://github.com/features/actions">Github Actions</a> as primary CI/CD service.
Please read the <a class="reference external" href="https://github.com/features/actions">Github Actions Overview</a> for more information.
On specific conditions (usually push events), the Github Actions workflows are triggered and executed.
The developers should ensure that all workflows always pass before merging, since they ensure that the package still builds and all tests are executed successfully.</p>
</div>
<div class="section" id="pr-to-master-from-patch-release-only-workflow">
<span id="pr-master-workflow-docs"></span><h3>pr_to_master_from_patch_release_only workflow<a class="headerlink" href="#pr-to-master-from-patch-release-only-workflow" title="Permalink to this headline">¶</a></h3>
<p>All templates feature a workflow called <code class="docutils literal notranslate"><span class="pre">pr_to_master_from_patch_release_only.yml</span></code>.
This workflow runs everytime a PR to your projects <code class="docutils literal notranslate"><span class="pre">master</span></code> branch is created. It fails, if the PR to the <code class="docutils literal notranslate"><span class="pre">master</span></code> branch
origins from a branch that does not contain <code class="docutils literal notranslate"><span class="pre">patch</span></code> or <code class="docutils literal notranslate"><span class="pre">release</span></code> in its branch name.
If development code is written on a branch called <code class="docutils literal notranslate"><span class="pre">development``and</span> <span class="pre">a</span> <span class="pre">new</span> <span class="pre">release</span> <span class="pre">of</span> <span class="pre">the</span> <span class="pre">project</span> <span class="pre">is</span> <span class="pre">to</span> <span class="pre">be</span> <span class="pre">made,</span>
<span class="pre">one</span> <span class="pre">should</span> <span class="pre">create</span> <span class="pre">a</span> <span class="pre">``release</span></code> branch only for this purpose and then merge it into <code class="docutils literal notranslate"><span class="pre">master</span></code> branch.
This ensures that new developments can already be merged into <code class="docutils literal notranslate"><span class="pre">development</span></code>, while the release is finally prepared and reviewed.
The <code class="docutils literal notranslate"><span class="pre">patch</span></code> branch should be used for required <code class="docutils literal notranslate"><span class="pre">hotfixes</span></code> (checked out directly from <code class="docutils literal notranslate"><span class="pre">master</span></code> branch) because, in the meantime, there might be
multiple developments going on at <code class="docutils literal notranslate"><span class="pre">development</span></code> branch and one should not interfere with them.</p>
</div>
<div class="section" id="sync-yml">
<h3>sync.yml<a class="headerlink" href="#sync-yml" title="Permalink to this headline">¶</a></h3>
<p>All templates also feature this workflow. This workflow is used for automatic syncing (if enabled) your project with the latest mlf-core template version.
The workflow invokes <code class="docutils literal notranslate"><span class="pre">mlf-core</span> <span class="pre">sync</span></code>, which automatically checks whether a new template version is available and if so it submits a pull request with the latest changes.
For more details please visit <a class="reference internal" href="sync.html#sync"><span class="std std-ref">Syncing your project</span></a>.</p>
</div>
<div class="section" id="publish-docker-yml">
<h3>publish_docker.yml<a class="headerlink" href="#publish-docker-yml" title="Permalink to this headline">¶</a></h3>
<p>All templates featuring Docker containers feature this workflow.
Any time you push to the <code class="docutils literal notranslate"><span class="pre">development</span></code> branch or create a release, a Docker container is built and released to <a class="reference external" href="https://github.com/features/packages">Github Packages</a>.
You should ensure that all of your pushes to the development branch are <code class="docutils literal notranslate"><span class="pre">*-SNAPSHOT</span></code> versions and only when releasing a non-SNAPSHOT version is built.
The workflow uses your Github PAT to write and overwrite (=delete) packages. You need to ensure that you provide your PAT with sufficient rights.
mlf-core requires <code class="docutils literal notranslate"><span class="pre">full</span> <span class="pre">repo</span></code> (not repo delete!), <code class="docutils literal notranslate"><span class="pre">write:packages</span></code> and <code class="docutils literal notranslate"><span class="pre">delete:packages</span></code> rights and <code class="docutils literal notranslate"><span class="pre">workflow</span></code> permissions!.</p>
<p>If you want to push to a different registry, then you need to adapt the workflow manually.</p>
<ol class="arabic simple">
<li><p>Replace <code class="docutils literal notranslate"><span class="pre">registry:</span> <span class="pre">docker.pkg.github.com</span></code> with your registry of choice.</p></li>
<li><p>Replace the username and password accordingly. It is <strong>strongly</strong> recommended to replace the password with a secret.</p></li>
</ol>
</div>
</div>
<div class="section" id="secrets">
<h2>Secrets<a class="headerlink" href="#secrets" title="Permalink to this headline">¶</a></h2>
<p>Github secrets are what their name suggests: Encrypted secret values in a repository or an organisation; once they are set their value can be used for sensible data in
a project or an organisation but their raw value can never be seen again even by an administrator (but it can be updated).</p>
<p>mlf-core uses a secret called <code class="docutils literal notranslate"><span class="pre">MLF_CORE_SYNC_TOKEN</span></code> for its syncing feature. This secret is automatically created during the repository creation process, if you choose to create a GitHub repo.
The secret contains your encrypted personal access token as its value. Note that this will have no effect on how to login or any other activity in your project.
If you remove the secret or change its value (even with another personal access token of you) the syncing feature will no longer work.
In case you are creating an organisation repository, the secret will also be stored as a repository secret, only usable for your specific project.</p>
<div class="section" id="error-handling-during-github-repository-creation">
<h3>Error handling during Github repository creation<a class="headerlink" href="#error-handling-during-github-repository-creation" title="Permalink to this headline">¶</a></h3>
<p>Errors during the create process due to a failed Github repo creation may occur due to a vast amount of reasons:
Some common error sources are:</p>
<ol class="arabic simple">
<li><p>You have no active internet connection or your firewall protects you against making calls to external APIs.</p></li>
</ol>
<p>2. The Github API service or Github itself is unreachable at the moment, which can happen from time to time. In doubt, make sure to check
<a class="reference external" href="https://www.githubstatus.com/">the Github status page</a>.</p>
<ol class="arabic simple" start="3">
<li><p>A repository with the same name already exists in your account/your organisation.</p></li>
<li><p>The token does not have all repository and workflow permissions.</p></li>
</ol>
<p>Creation fails, ok: But how can I then access the full features of mlf-core?
Try to fix the issue (or wait some time on case, for example, when Github is down) and then process to create a Github repository manually.
After this, make sure to create a secret named <code class="docutils literal notranslate"><span class="pre">MLF_CORE_SYNC_TOKEN</span></code> with the value of your PAT for your repository.
See <a class="reference external" href="https://docs.github.com/en/actions/configuring-and-managing-workflows/creating-and-storing-encrypted-secrets">the Github docs</a>
for more information on how to create a secret.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="creating_releases.html" class="btn btn-neutral float-right" title="Creating Releases" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="available_templates/available_templates.html" class="btn btn-neutral float-left" title="Available templates" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2020, Lukas Heumos.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>